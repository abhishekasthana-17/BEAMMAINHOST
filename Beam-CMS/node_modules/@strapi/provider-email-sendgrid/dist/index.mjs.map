{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import sendgrid, { MailDataRequired } from '@sendgrid/mail';\n\ninterface Settings {\n  defaultFrom: string;\n  defaultReplyTo: string;\n}\n\ninterface SendOptions {\n  from?: string;\n  to: string;\n  cc: string;\n  bcc: string;\n  replyTo?: string;\n  subject: string;\n  text: string;\n  html: string;\n  [key: string]: unknown;\n}\n\ninterface ProviderOptions {\n  apiKey: string;\n}\n\nexport default {\n  init(providerOptions: ProviderOptions, settings: Settings) {\n    sendgrid.setApiKey(providerOptions.apiKey);\n\n    return {\n      send(options: SendOptions): Promise<void> {\n        return new Promise((resolve, reject) => {\n          const { from, to, cc, bcc, replyTo, subject, text, html, ...rest } = options;\n\n          const msg: MailDataRequired = {\n            from: from || settings.defaultFrom,\n            to,\n            cc,\n            bcc,\n            replyTo: replyTo || settings.defaultReplyTo,\n            subject,\n            text,\n            html,\n            ...rest,\n          };\n\n          sendgrid.send(msg, false, (err) => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve();\n            }\n          });\n        });\n      },\n    };\n  },\n};\n"],"names":["init","providerOptions","settings","sendgrid","setApiKey","apiKey","send","options","Promise","resolve","reject","from","to","cc","bcc","replyTo","subject","text","html","rest","msg","defaultFrom","defaultReplyTo","err"],"mappings":";;AAuBA,YAAe;IACbA,IAAKC,CAAAA,CAAAA,eAAgC,EAAEC,QAAkB,EAAA;QACvDC,QAASC,CAAAA,SAAS,CAACH,eAAAA,CAAgBI,MAAM,CAAA;QAEzC,OAAO;AACLC,YAAAA,IAAAA,CAAAA,CAAKC,OAAoB,EAAA;gBACvB,OAAO,IAAIC,OAAQ,CAAA,CAACC,OAASC,EAAAA,MAAAA,GAAAA;AAC3B,oBAAA,MAAM,EAAEC,IAAI,EAAEC,EAAE,EAAEC,EAAE,EAAEC,GAAG,EAAEC,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAEC,IAAI,EAAE,GAAGC,MAAM,GAAGZ,OAAAA;AAErE,oBAAA,MAAMa,GAAwB,GAAA;wBAC5BT,IAAMA,EAAAA,IAAAA,IAAQT,SAASmB,WAAW;AAClCT,wBAAAA,EAAAA;AACAC,wBAAAA,EAAAA;AACAC,wBAAAA,GAAAA;wBACAC,OAASA,EAAAA,OAAAA,IAAWb,SAASoB,cAAc;AAC3CN,wBAAAA,OAAAA;AACAC,wBAAAA,IAAAA;AACAC,wBAAAA,IAAAA;AACA,wBAAA,GAAGC;AACL,qBAAA;AAEAhB,oBAAAA,QAAAA,CAASG,IAAI,CAACc,GAAK,EAAA,KAAA,EAAO,CAACG,GAAAA,GAAAA;AACzB,wBAAA,IAAIA,GAAK,EAAA;4BACPb,MAAOa,CAAAA,GAAAA,CAAAA;yBACF,MAAA;AACLd,4BAAAA,OAAAA,EAAAA;AACF;AACF,qBAAA,CAAA;AACF,iBAAA,CAAA;AACF;AACF,SAAA;AACF;AACF,CAAE;;;;"}